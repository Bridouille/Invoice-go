<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8">
		<title>Générateur de factures</title>

		<link rel="stylesheet" href="css/bootstrap.min.css">

		<!-- Angulars Material CSS now available via Google CDN; version 0.8 used here -->
    	<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/0.8.3/angular-material.min.css">

		<link rel="stylesheet" href="css/font-awesome.min.css">
		<link rel="stylesheet" href="css/main.css">
	</head>
	<body ng-app="invoice" ng-controller="invoiceCtrl">
		<md-toolbar class="md-primary md-hue-2">
		    <div class="md-toolbar-tools">
		     	<md-button class="md-default" ng-click="showOptions($event)">
		      		<i class="fa fa-coffee"></i> générateur de factures
		    	</md-button>
		      	<span flex></span>
		      	<md-button class="md-default" ng-click="showOptions($event)">
		      		<i class="fa fa-users"></i> Modifier les parties
		    	</md-button>
		    </div>
		</md-toolbar>
		<div class="container-fluid">	
			<div class="col-lg-8">
				<md-whiteframe class="md-whiteframe-z1" layout="column" layout-align="center center">
			        <md-content class="md-padding">
			          	<div class="col-lg-12">
							<div class="col-lg-6">
								<b>De</b>
								<p>{{ seller.name }}</p>
								<p>Siret : <b>{{ seller.siret | siret }}</b></p>
								<p>{{ seller.address }}</p>
								<p>{{ seller.zipcode }}, {{ seller.city }} - {{ seller.country | uppercase }}</p>
							</div>
							<div class="col-lg-6 text-right">
								<h1><em>{{ opt.type == true ? 'Facture' : 'Devis' }} N° {{ opt.number }}</em></h1>
							</div>
						</div>
						<div class="col-lg-12 mt">
							<div class="col-lg-6">
								<b>A</b>
								<p>{{ client.name }}</p>
								<p>{{ client.address }}</p>
								<p>{{ client.zipcode }}, {{ client.city }} - {{ client.country | uppercase }}</p>
							</div>
							<div class="col-lg-6 text-right mt">
								<p><strong>Date {{ opt.type == true ? 'de la facture' : 'du devis' }} : </strong>{{ formatDate(opt.startDate) }}</p>
								<p><strong>Date d'échéance :</strong> {{ formatDate(opt.endDate) }}</p>
							</div>
						</div>
						<div class="col-lg-12 mt">
							<table class="table table-hover">
								<thead>
									<!-- <tr> -->
										<th>#</th>
										<th class="col-lg-12">Description</th>
										<th>Quantité</th>
										<th>Unité</th>
										<th class="col-lg-4">TVA</th>
										<th class="col-lg-4">Coût</th>
									<!-- </tr> -->
								</thead>
								<tbody>
									<tr ng-repeat="(idx, item) in items">
										<td>{{ idx + 1 }}</td>
										<td>{{ item.description }}</td>
										<td>{{ item.quantity }}</td>
										<td>{{ item.unit }} {{ opt.devise }}</td>
										<td>{{ opt.tva }} %</td>
										<td>{{ calcLine(item)}}</td>
										<td>
											<md-button class="md-primary md-warn" aria-label="Remove item" ng-click="removeItem(item)">
												<i class="fa fa-times"></i> Del
											</md-button>
										</td>
									</tr>
									<tr class="addItem">
										<td>
											{{ items.length + 1}}
										</td>
										<td>
											<md-input-container flex>
									         	<label>Description</label>
									         	<input ng-model="newItem.description" ng-init="newItem = genNewItem()">
									        </md-input-container>
										</td>
										<td>
											<md-input-container flex>
									         	<label>Quantité</label>
									         	<input type="number" ng-model="newItem.quantity" >
									        </md-input-container>
										</td>
										<td>
											<md-input-container flex>
									         	<label>Unité</label>
									         	<input type="number" ng-model="newItem.unit">
									        </md-input-container>
										</td>
										<td>
											{{ opt.tva }} %
										</td>
										<td>
											{{ calcLine(newItem) }}
										</td>
										<td>
											<md-button class="md-primary" ng-click="addItem(newItem)">
												<i class="fa fa-plus"></i> Add
											</md-button>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
						<div class="col-lg-12">
							<invoice-total to-sum="items" options="opt"></invoice-total>
						</div>
			        </md-content>				
				</md-whiteframe>
			</div>
			<div class="col-lg-4">
				<md-whiteframe class="md-whiteframe-z1" layout="column" layout-align="center center">
					<h2>Options</h2>
					<div layout="row" layout-align="center center" class="col-xs-12">
						<div class="col-xs-4">
					        <span class="md-body-1">TVA (%)</span>
					    </div>
					    <div class="col-xs-5">
					    	<md-slider flex min="0" max="25" ng-model="opt.tva" aria-label="blue" id="blue-slider" class="md-primary"></md-slider>
					    </div>
				      	<div flex layout class="col-xs-3">
				        	<input type="number" ng-model="opt.tva" aria-label="blue" aria-controls="blue-slider">
				      	</div>
					</div>
					<div layout="row" layout-align="center center" class="col-xs-12">
				    	<div class="col-xs-6">
				    		Type de document :
				    	</div>
				    	<div class="col-xs-3">
				    		<md-switch ng-model="opt.type" aria-label="Switch 1" class="md-primary"></md-switch>
				    	</div>
						<div class="col-xs-3">
							{{ opt.type == true ? 'Facture' : 'Devis' }}
						</div>
					</div>
					<div layout="row" layout-align="center center" class="col-xs-12 mb">
						<div class="col-xs-6">
							Pièce numero # :
						</div>
						<div class="col-xs-6">
							<md-input-container flex>
				          		<label>Numero</label>
				         		<input ng-model="opt.number">
				        	</md-input-container>
						</div>
					</div>
					<div layout="row" layout-align="center center" class="col-xs-12">
						<div class="col-xs-5">
							Date de début
						</div>
						<div class="col-xs-7">
							<md-input-container flex>
					        	<label>Début</label>
					        	<input type="date" ng-change="debug()" ng-model="opt.startDate">
					        </md-input-container>
						</div>
					</div>
					<div layout="row" layout-align="center center" class="col-xs-12">
						<div class="col-xs-5">
							Date d'échéance
						</div>
						<div class="col-xs-7">
							<md-input-container flex>
					        	<label>Fin</label>
					        	<input type="date" ng-model="opt.endDate">
					        </md-input-container>
						</div>
					</div>
					<div layout="row" layout-align="center center" class="col-xs-12 mt">
						<div class="col-xs-5">
							Devise
						</div>
						<div class="col-xs-7">
							<md-input-container flex>
					        	<label>Devise</label>
					        	<input maxlength="5" ng-model="opt.devise">
					        </md-input-container>
						</div>
					</div>
					<div layout="row" layout-align="center center" class="col-xs-12">
						<div class="col-xs-5">
							Déjà payé
						</div>
						<div class="col-xs-7">
							<md-input-container flex>
					        	<label>Payé</label>
					        	<input type="number" ng-model="opt.paid">
					        </md-input-container>
						</div>
					</div>
					<div layout="row" layout-align="center center" class="col-xs-12 mt">
						<md-button class="md-primary md-hue-2 p"><i class="fa fa-print pr"></i> Imprimer</md-button>
					</div>
				</md-whiteframe>
			</div>
		</div>

		  <!-- Angular Material Dependencies -->
	    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
	    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-animate.min.js"></script>
	    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-aria.min.js"></script>

	    <!-- Angular Material Javascript now available via Google CDN; version 0.8 used here -->
	    <script src="https://ajax.googleapis.com/ajax/libs/angular_material/0.8.3/angular-material.min.js"></script>
	    <script src="js/app.js"></script>
	</body>
</html>